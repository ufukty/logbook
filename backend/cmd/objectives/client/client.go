// Code generated by gohandlers v0.37.0. DO NOT EDIT.

package objectives

import (
	"fmt"
	"logbook/cmd/objectives/endpoints"
	"net/http"
)

type Interface interface {
	CreateObjective(*endpoints.CreateObjectiveRequest) (*endpoints.CreateObjectiveResponse, error)
	GetPlacement(*endpoints.GetPlacementRequest) (*endpoints.GetPlacementResponse, error)
	MarkComplete(*endpoints.MarkCompleteRequest) (*endpoints.MarkCompleteResponse, error)
	ReattachObjective(*endpoints.ReattachObjectiveRequest) (*endpoints.ReattachObjectiveResponse, error)
	RockCreate(*endpoints.RockCreateRequest) (*http.Response, error)
}

type Mock struct {
	CreateObjectiveFunc   func(*endpoints.CreateObjectiveRequest) (*endpoints.CreateObjectiveResponse, error)
	GetPlacementFunc      func(*endpoints.GetPlacementRequest) (*endpoints.GetPlacementResponse, error)
	MarkCompleteFunc      func(*endpoints.MarkCompleteRequest) (*endpoints.MarkCompleteResponse, error)
	ReattachObjectiveFunc func(*endpoints.ReattachObjectiveRequest) (*endpoints.ReattachObjectiveResponse, error)
	RockCreateFunc        func(*endpoints.RockCreateRequest) (*http.Response, error)
}

func (m *Mock) CreateObjective(bq *endpoints.CreateObjectiveRequest) (*endpoints.CreateObjectiveResponse, error) {
	if m.CreateObjectiveFunc == nil {
		return nil, fmt.Errorf("not implemented: CreateObjective")
	}
	return m.CreateObjectiveFunc(bq)
}

func (m *Mock) GetPlacement(bq *endpoints.GetPlacementRequest) (*endpoints.GetPlacementResponse, error) {
	if m.GetPlacementFunc == nil {
		return nil, fmt.Errorf("not implemented: GetPlacement")
	}
	return m.GetPlacementFunc(bq)
}

func (m *Mock) MarkComplete(bq *endpoints.MarkCompleteRequest) (*endpoints.MarkCompleteResponse, error) {
	if m.MarkCompleteFunc == nil {
		return nil, fmt.Errorf("not implemented: MarkComplete")
	}
	return m.MarkCompleteFunc(bq)
}

func (m *Mock) ReattachObjective(bq *endpoints.ReattachObjectiveRequest) (*endpoints.ReattachObjectiveResponse, error) {
	if m.ReattachObjectiveFunc == nil {
		return nil, fmt.Errorf("not implemented: ReattachObjective")
	}
	return m.ReattachObjectiveFunc(bq)
}

func (m *Mock) RockCreate(bq *endpoints.RockCreateRequest) (*http.Response, error) {
	if m.RockCreateFunc == nil {
		return nil, fmt.Errorf("not implemented: RockCreate")
	}
	return m.RockCreateFunc(bq)
}

type Pool interface {
	Host() (string, error)
}

type Client struct {
	p Pool
}

func NewClient(p Pool) *Client {
	return &Client{p: p}
}

func (c *Client) CreateObjective(bq *endpoints.CreateObjectiveRequest) (*endpoints.CreateObjectiveResponse, error) {
	h, err := c.p.Host()
	if err != nil {
		return nil, fmt.Errorf("selecting host: %w", err)
	}
	rq, err := bq.Build(h)
	if err != nil {
		return nil, fmt.Errorf("building request: %w", err)
	}
	rs, err := http.DefaultClient.Do(rq)
	if err != nil {
		return nil, fmt.Errorf("sending: %w", err)
	}
	if rs.StatusCode != http.StatusOK {
		return nil, fmt.Errorf("non-200 status code: %d (%s)", rs.StatusCode, http.StatusText(rs.StatusCode))
	}
	bs := &endpoints.CreateObjectiveResponse{}
	err = bs.Parse(rs)
	if err != nil {
		return nil, fmt.Errorf("parsing response: %w", err)
	}
	return bs, nil
}

func (c *Client) GetPlacement(bq *endpoints.GetPlacementRequest) (*endpoints.GetPlacementResponse, error) {
	h, err := c.p.Host()
	if err != nil {
		return nil, fmt.Errorf("selecting host: %w", err)
	}
	rq, err := bq.Build(h)
	if err != nil {
		return nil, fmt.Errorf("building request: %w", err)
	}
	rs, err := http.DefaultClient.Do(rq)
	if err != nil {
		return nil, fmt.Errorf("sending: %w", err)
	}
	if rs.StatusCode != http.StatusOK {
		return nil, fmt.Errorf("non-200 status code: %d (%s)", rs.StatusCode, http.StatusText(rs.StatusCode))
	}
	bs := &endpoints.GetPlacementResponse{}
	err = bs.Parse(rs)
	if err != nil {
		return nil, fmt.Errorf("parsing response: %w", err)
	}
	return bs, nil
}

func (c *Client) MarkComplete(bq *endpoints.MarkCompleteRequest) (*endpoints.MarkCompleteResponse, error) {
	h, err := c.p.Host()
	if err != nil {
		return nil, fmt.Errorf("selecting host: %w", err)
	}
	rq, err := bq.Build(h)
	if err != nil {
		return nil, fmt.Errorf("building request: %w", err)
	}
	rs, err := http.DefaultClient.Do(rq)
	if err != nil {
		return nil, fmt.Errorf("sending: %w", err)
	}
	if rs.StatusCode != http.StatusOK {
		return nil, fmt.Errorf("non-200 status code: %d (%s)", rs.StatusCode, http.StatusText(rs.StatusCode))
	}
	bs := &endpoints.MarkCompleteResponse{}
	err = bs.Parse(rs)
	if err != nil {
		return nil, fmt.Errorf("parsing response: %w", err)
	}
	return bs, nil
}

func (c *Client) ReattachObjective(bq *endpoints.ReattachObjectiveRequest) (*endpoints.ReattachObjectiveResponse, error) {
	h, err := c.p.Host()
	if err != nil {
		return nil, fmt.Errorf("selecting host: %w", err)
	}
	rq, err := bq.Build(h)
	if err != nil {
		return nil, fmt.Errorf("building request: %w", err)
	}
	rs, err := http.DefaultClient.Do(rq)
	if err != nil {
		return nil, fmt.Errorf("sending: %w", err)
	}
	if rs.StatusCode != http.StatusOK {
		return nil, fmt.Errorf("non-200 status code: %d (%s)", rs.StatusCode, http.StatusText(rs.StatusCode))
	}
	bs := &endpoints.ReattachObjectiveResponse{}
	err = bs.Parse(rs)
	if err != nil {
		return nil, fmt.Errorf("parsing response: %w", err)
	}
	return bs, nil
}

func (c *Client) RockCreate(bq *endpoints.RockCreateRequest) (*http.Response, error) {
	h, err := c.p.Host()
	if err != nil {
		return nil, fmt.Errorf("selecting host: %w", err)
	}
	rq, err := bq.Build(h)
	if err != nil {
		return nil, fmt.Errorf("building request: %w", err)
	}
	rs, err := http.DefaultClient.Do(rq)
	if err != nil {
		return nil, fmt.Errorf("sending: %w", err)
	}
	if rs.StatusCode != http.StatusOK {
		return rs, fmt.Errorf("non-200 status code: %d (%s)", rs.StatusCode, http.StatusText(rs.StatusCode))
	}
	return rs, nil
}
